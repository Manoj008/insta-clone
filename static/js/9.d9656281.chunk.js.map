{"version":3,"sources":["pages/Signup.js"],"names":["Signup","history","useHistory","firebase","useContext","FirebaseContext","useState","username","setUsername","fullName","setFullName","email","setEmail","password","setPassword","confirmPass","setConfirmPass","error","setError","isInvalid","handleSignup","e","a","preventDefault","console","log","doesUsernameExist","usernameExist","doesEmailExist","emailExist","auth","createUserWithEmailAndPassword","createdUserResult","user","updateProfile","displayName","firestore","collection","add","userId","uid","toLowerCase","bio","mobile","gender","profile","following","followers","dateCreated","Date","now","push","ROUTES","message","useEffect","document","title","className","src","alt","onSubmit","method","aria-label","type","placeholder","onChange","target","value","disabled","to"],"mappings":"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","file":"static/js/9.d9656281.chunk.js","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport FirebaseContext from '../context/Firebase';\r\nimport * as ROUTES from '../constants/Routes';\r\nimport { doesUsernameExist, doesEmailExist } from '../services/Firbase';\r\n\r\n\r\nfunction Signup() {\r\n\r\n    const history = useHistory();\r\n    const { firebase } = useContext(FirebaseContext);\r\n\r\n    const [username, setUsername] = useState('');\r\n    const [fullName, setFullName] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [confirmPass, setConfirmPass] = useState('');\r\n    const [error, setError] = useState('');\r\n\r\n    const isInvalid = email === '' || password === '' || confirmPass === '' || username === '' || fullName === '';\r\n\r\n    const handleSignup = async (e) => {\r\n        e.preventDefault();\r\n\r\n        console.log(\"handle Signup\")\r\n        const usernameExist = await doesUsernameExist(username);\r\n        const emailExist = await doesEmailExist(email);\r\n        if (password !== confirmPass) {\r\n            setError('Confirm Password does not matches with Password');\r\n        } else {\r\n            if (!usernameExist && !emailExist) {\r\n                try {\r\n                    const createdUserResult = await firebase\r\n                        .auth()\r\n                        .createUserWithEmailAndPassword(email, password);\r\n\r\n                    await createdUserResult.user.updateProfile({\r\n                        displayName: username\r\n                    });\r\n                    console.log(\"user sign in start\");\r\n                    await firebase.firestore().collection('users').add({\r\n                        userId: createdUserResult.user.uid,\r\n                        username: username,\r\n                        fullName: fullName,\r\n                        email: email.toLowerCase(),\r\n                        bio: \"\",\r\n                        mobile: \"\",\r\n                        gender: \"\",\r\n                        profile: \"\",\r\n                        following: [],\r\n                        followers: [],\r\n                        dateCreated: Date.now()\r\n                    });\r\n                    console.log(\"signin end\");\r\n                    history.push(ROUTES.DASHBOARD);\r\n\r\n\r\n                }\r\n                catch (error) {\r\n                    setEmail('');\r\n                    setFullName('');\r\n                    setUsername('');\r\n                    setPassword('');\r\n                    setConfirmPass('');\r\n                    setError(error.message);\r\n                }\r\n            }\r\n            else {\r\n                if (emailExist) {\r\n                    setError(\"This Email Address is already in use, please enter different Email Address\")\r\n                }\r\n                else if (usernameExist) {\r\n                    setError(\"This Username is already taken, Please choose a different username\");\r\n                }\r\n\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    useEffect(() => {\r\n        document.title = 'Signup-Insta'\r\n\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"container flex mx-auto max-w-screen-md items-center h-screen\">\r\n            <div className=\"flex flex-col w-2/3\">\r\n                <img src=\"/images/iphone-with-profile.jpg\" alt=\"Instgram\" />\r\n            </div>\r\n            <div className=\"flex flex-col w-1/2\">\r\n                <div className=\"flex justify-center items-center flex-col w-full bg-white p-8 mb-4 border border-gray-500 \">\r\n                    <h1 className=\"flex justify-center w-full\">\r\n                        <img src=\"/images/logo.png\" alt=\"Instagram\" className=\"my-4 w-2/3\" />\r\n                    </h1>\r\n                    {error && <p className=\"mb-4 p-2 text-xs bg-red-200 text-black rounded\">{error}</p>}\r\n\r\n                    <form onSubmit={handleSignup} method=\"POST\">\r\n                        <input\r\n                            aria-label=\"Enter your Email Address\"\r\n                            type=\"email\"\r\n                            placeholder=\"Email Address\"\r\n                            className=\"text-xs text-center bg-gray-50 w-full mr-3 py-5 px-4 h-1.5 \r\n                        border border-gray-500 rounded mb-2\"\r\n                            onChange={({ target }) => setEmail(target.value)}\r\n                            value={email}\r\n                        />\r\n                        <input\r\n                            aria-label=\"Enter your Full Name\"\r\n                            type=\"text\"\r\n                            placeholder=\"Full Name\"\r\n                            className=\"text-xs text-center bg-gray-50 w-full mr-3 py-5 px-4 h-1.5 \r\n                        border border-gray-500 rounded mb-2\"\r\n                            onChange={({ target }) => setFullName(target.value)}\r\n                            value={fullName}\r\n                        />\r\n                        <input\r\n                            aria-label=\"Enter your Username\"\r\n                            type=\"text\"\r\n                            placeholder=\"Userame\"\r\n                            className=\"text-xs text-center bg-gray-50 w-full mr-3 py-5 px-4 h-1.5 \r\n                        border border-gray-500 rounded mb-2\"\r\n                            onChange={({ target }) => setUsername(target.value)}\r\n                            value={username}\r\n                        />\r\n                        <input\r\n                            aria-label=\"Enter your Password\"\r\n                            type=\"password\"\r\n                            placeholder=\"Password\"\r\n                            className=\"text-xs text-center bg-gray-50 w-full mr-3 py-5 px-4 h-1.5\r\n                        border border-gray-500 rounded mb-2\"\r\n                            onChange={({ target }) => setPassword(target.value)}\r\n                            value={password}\r\n                        />\r\n                        <input\r\n                            aria-label=\"Confirm your Password\"\r\n                            type=\"password\"\r\n                            placeholder=\"Confirm Password\"\r\n                            className=\"text-xs text-center bg-gray-50 w-full mr-3 py-5 px-4 h-1.5\r\n                        border border-gray-500 rounded mb-2\"\r\n                            onChange={({ target }) => setConfirmPass(target.value)}\r\n                            value={confirmPass}\r\n                        />\r\n                        <button\r\n                            disabled={isInvalid}\r\n                            type=\"submit\"\r\n                            className={`mt-1 w-full py-1 font-bold rounded bg-blue-500 text-white borderborder-blue-900\r\n                         ${isInvalid && 'opacity-50'}`\r\n                            }>SIGN UP</button>\r\n                    </form>\r\n                </div>\r\n                <div className=\"flex justify-center items-center flex-col w-full bg-white p-4 border border-gray-500 \">\r\n                    <p className=\"text-sm\">Already have an Account?{` `}\r\n                        <Link to={ROUTES.LOGIN} className=\"font-semibold text-blue-400\">\r\n                            Login\r\n                        </Link></p>\r\n                </div>\r\n            </div>\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default Signup;\r\n"],"sourceRoot":""}