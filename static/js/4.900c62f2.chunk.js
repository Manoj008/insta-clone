(this["webpackJsonpinsta-clone"]=this["webpackJsonpinsta-clone"]||[]).push([[4],{64:function(e,t,c){"use strict";c(1);var s=c(2);t.a=function(){return Object(s.jsxs)("div",{class:"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-gray-700 opacity-75 flex flex-col items-center justify-center",children:[Object(s.jsx)("div",{class:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4"}),Object(s.jsx)("h2",{class:"text-center text-white text-xl font-semibold",children:"Loading..."}),Object(s.jsx)("p",{class:"w-1/3 text-center text-white",children:"This may take a few seconds"})]})}},65:function(e,t,c){"use strict";var s=c(39),n=c(5),a=c.n(n),r=c(8),l=c(14),o=c(1),i=c(25),d=c(23),u=c(2);t.a=function(e){var t,c=e.docId,n=e.totalLikes,m=e.likedPhoto,j=e.handleFocus,b=Object(o.useContext)(i.a).user.uid,x=void 0===b?"":b,f=Object(o.useState)(m),p=Object(l.a)(f,2),h=p[0],O=p[1],g=Object(o.useState)(n),v=Object(l.a)(g,2),w=v[0],N=v[1],y=Object(o.useContext)(d.a),k=y.firebase,I=y.FieldValue,C=function(){var e=Object(r.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!h),e.next=3,k.firestore().collection("photos").doc(c).update({likes:h?I.arrayRemove(x):I.arrayUnion(x)});case 3:N((function(e){return h?e-1:e+1}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"flex justify-between px-4 pt-2",children:Object(u.jsxs)("div",{className:"flex",children:[Object(u.jsx)("svg",{onClick:C,onKeyDown:function(e){"Enter"===e.key&&C()},xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-8 mr-4 select-none cursor-pointer ".concat(h?"fill-red text-red-600":"text-gray-800"),children:Object(u.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),Object(u.jsx)("svg",(t={onClick:j,onKeyDown:function(e){"Enter"===e.key&&j()},xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Object(s.a)(t,"className","w-8 mr-4 select-none text-gray-800 cursor-pointer"),Object(s.a)(t,"children",Object(u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})),t))]})}),Object(u.jsx)("div",{className:"px-4 py-0 my-0",children:Object(u.jsx)("p",{className:"font-semibold",children:"".concat(w,1===w?" like":" likes ")})})]})}},66:function(e,t,c){"use strict";c(1);var s=c(19),n=c(2);t.a=function(e){var t=e.caption,c=e.username;return Object(n.jsxs)("div",{className:"px-4 pt-0 pb-0",children:[Object(n.jsx)(s.b,{to:"/profile/".concat(c),children:Object(n.jsxs)("span",{className:"mr-1 font-medium text-gray-800",children:[c,":"]})}),Object(n.jsx)("span",{className:"text-xs text-gray-800",children:t})]})}},67:function(e,t,c){"use strict";var s=c(14),n=c(1),a=c(78),r=c(19),l=c(70),o=c(23),i=c(25),d=c(2);var u=function(e){var t=e.docId,c=e.comments,a=e.setComments,r=e.commentInput,u=Object(n.useState)(""),m=Object(s.a)(u,2),j=m[0],b=m[1],x=Object(n.useContext)(o.a),f=x.firebase,p=x.FieldValue,h=Object(n.useContext)(i.a).user.displayName,O=function(e){if(e.preventDefault(),j.length>0)return a([{displayName:h,comment:j}].concat(Object(l.a)(c))),b(""),f.firestore().collection("photos").doc(t).update({comments:p.arrayUnion({displayName:h,comment:j})})};return Object(d.jsx)("div",{className:"border-t border-gray-500",children:Object(d.jsxs)("form",{method:"POST",onSubmit:O,className:"flex justify-between px-0",children:[Object(d.jsx)("input",{"aria-label":"Add a Comment",autocomplete:"off",type:"text",name:"add-comment",value:j,placeholder:"Add a comment...",onChange:function(e){var t=e.target;return b(t.value)},ref:r,className:"text-sm text-gray-800 w-full mr-1 py-2 px-4"}),Object(d.jsx)("button",{className:"px-2 cursor-pointer  text-blue-500 ".concat(!j&&"opacity-25"," "),type:"button",disabled:j.length<1,onClick:O,children:Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 rotate-90",viewBox:"0 0 20 20",fill:"blue",className:"w-6 transform rotate-90",children:Object(d.jsx)("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})]})})};function m(e){var t=e.item;return Object(d.jsxs)("p",{className:"mb-0",children:[Object(d.jsx)(r.b,{to:"/profile/".concat(t.displayName),children:Object(d.jsxs)("span",{className:"mr-1 font-medium text-gray-800",children:[t.displayName,":"]})}),Object(d.jsx)("span",{className:"text-xs",children:t.comment})]})}t.a=function(e){var t=e.docId,c=e.comments,r=e.posted,l=e.commentInput,o=Object(n.useState)(c),i=Object(s.a)(o,2),j=i[0],b=i[1],x=Object(n.useState)(!1),f=Object(s.a)(x,2),p=f[0],h=f[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"px-4 py-2",children:[j.length>=3&&Object(d.jsx)("p",{className:"text-sm text-gray-800 mb-0 cursor-pointer",onClick:function(){return h(!p)},children:p?"show less comments":"View all ".concat(j.length," comments")}),p?j.slice(0,10).map((function(e){return Object(d.jsx)(m,{item:e},"".concat(e.comment,"-").concat(e.displayName))})):j.slice(0,2).map((function(e){return Object(d.jsx)(m,{item:e},"".concat(e.comment,"-").concat(e.displayName))})),Object(d.jsxs)("p",{className:"text-gray-800 text-xs mt-1",children:[Object(a.a)(r,new Date)," ago"]})]}),Object(d.jsx)(u,{className:"bottom-0",docId:t,comments:j,setComments:b,commentInput:l})]})}},79:function(e,t,c){"use strict";c.r(t);var s=c(1),n=c(31),a=c(27),r=c(5),l=c.n(r),o=c(8),i=c(14),d=c(62),u=c.n(d),m=c(24),j=c(19),b=c(2);var x=function(e){var t=e.profileDocId,c=e.username,n=e.suggestedUserPic,a=e.profileId,r=e.userId,d=e.loggedInUserDocId,u=Object(s.useState)(!1),x=Object(i.a)(u,2),f=x[0],p=x[1];function h(){return(h=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,Object(m.m)(d,a,!1);case 3:return e.next=5,Object(m.l)(t,r,!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return f?null:Object(b.jsxs)("div",{className:"grid md:grid-cols-8 md:gap-4 items-center",children:[Object(b.jsx)("div",{className:"block  md:flex md:col-span-6 items-center justify-between md:px-2",children:Object(b.jsxs)(j.b,{to:"/profile/".concat(c),className:"md:flex md:items-center text-center w-10 md:w-full",children:[Object(b.jsx)("img",{className:"rounded-full w-10 h-10  mx-4 md:mx-0 md:pd-0",src:n||"/insta-clone/images/avatars/dali.jpg",alt:"user profile pic"}),Object(b.jsx)("p",{className:"font-bold text-sm md:mx-3 hidden md:block",children:c.length>8?c.substring(0,8)+".":c})]})}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{className:"text-xs font-bold text-blue-500 hidden md:block",type:"button",onClick:function(){return h.apply(this,arguments)},children:"Follow"})})]})};var f=function(e){var t=e.userId,c=e.following,n=e.loggedInUserDocId,a=Object(s.useState)(null),r=Object(i.a)(a,2),d=r[0],j=r[1];return Object(s.useEffect)((function(){function e(){return(e=Object(o.a)(l.a.mark((function e(){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.f)(t,c);case 2:s=e.sent,j(s);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&function(){e.apply(this,arguments)}()}),[t]),d?d.length>0?Object(b.jsxs)("div",{className:"rounded absolute top-16  md:static md:flex md:flex-col  ",children:[Object(b.jsx)("div",{className:"flex text-sm items-center align-items justify-between mb-2",children:d&&Object(b.jsx)("p",{className:"font-bold text-gray-500 ml-3 md:ml-0",children:"Suggestions for you"})}),Object(b.jsx)("div",{className:" rounded-md flex md:grid md:gap-5 overflow-x-auto max-w-full w-10/12 mx-3 px-1 py-2 bg-gray-300 md:px-2 md:mx-0 ",children:d.map((function(e){return Object(b.jsx)(x,{profileDocId:e.docId,username:e.username,suggestedUserPic:e.profilePicture,profileId:e.userId,userId:t,loggedInUserDocId:n},e.docId)}))})]}):null:Object(b.jsx)(u.a,{count:1,height:150,className:"mt-5"})},p=c(39),h=c(26),O=c.n(h),g=function(e){var t=e.username,c=e.fullName,s=e.userProfilePic;return t&&c?Object(b.jsxs)(j.b,{to:"/profile/".concat(t),className:"hidden md:grid grid-cols-4 gap-4 mb-6 items-center ",children:[Object(b.jsx)("div",{className:"flex items-center justify-between col-span-1 w-12 h-12   mr-3 ",children:Object(b.jsx)("img",{src:s,alt:"profile pic",className:"rounded-full w-12 h-12"})}),Object(b.jsxs)("div",{className:"col-span-3",children:[Object(b.jsx)("p",{className:"font-bold text-sm",children:t}),Object(b.jsx)("p",{className:"text-sm",children:c})]})]}):Object(b.jsx)(u.a,{count:1,height:61})};g.prototype=Object(p.a)({username:O.a.string.isRequired,fullName:O.a.string.isRequired},"fullName",O.a.string.isRequired);var v=g;var w=function(){var e=Object(a.a)().user;return Object(b.jsxs)("div",{className:"p-4 pt-0 max-h-40",children:[Object(b.jsx)(v,{username:e&&e.username,fullName:e&&e.fullName,userProfilePic:e.profilePicture?e.profilePicture:"/insta-clone/images/avatars/dali.jpg"}),Object(b.jsx)(f,{userId:e&&e.userId,following:e&&e.following,loggedInUserDocId:e&&e.docId})]})},N=c(25);var y=function(){var e=Object(s.useState)(null),t=Object(i.a)(e,2),c=t[0],n=t[1],a=Object(s.useContext)(N.a).user.uid,r=void 0===a?"":a;return Object(s.useEffect)((function(){function e(){return(e=Object(o.a)(l.a.mark((function e(){var t,c,s,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.g)(r);case 2:if((t=e.sent)&&(s=Object(i.a)(t,1),c=s[0].following),a=[],!c){e.next=10;break}if(!(c.length>0)){e.next=10;break}return e.next=9,Object(m.e)(r,c);case 9:a=e.sent;case 10:a.sort((function(e,t){return t.dateCreated-e.dateCreated})),n(a);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r]),{photos:c}},k=c(42);var I=function(e){var t=e.username,c=e.profilePic;return Object(b.jsx)("div",{className:"flex border-b border-gray-500 h-3 p-3 py-7",children:Object(b.jsx)("div",{className:"flex items-center",children:Object(b.jsxs)(j.b,{to:"/profile/".concat(t),className:"flex items-center",children:[Object(b.jsx)("div",{className:"rounded-full bg-gradient-to-t from-red-400 to-pink-800 \r h-10 w-10 content-center flex flex-wrap mr-3",children:Object(b.jsx)("div",{className:"rounded-full bg-white h-9 w-9 m-auto flex flex-wrap content-center items-center",children:Object(b.jsx)("img",{src:c,className:"rounded-full h-8 w-8 m-auto",alt:"".concat(t," profile pic")})})}),Object(b.jsx)("p",{className:"font-bold",children:t})]})})})},C=c(23);var P=function(e){var t=e.content,c=Object(s.useState)(t.likedPhoto),n=Object(i.a)(c,2),a=(n[0],n[1],Object(s.useState)(t.likes.length)),r=Object(i.a)(a,2),l=(r[0],r[1],Object(s.useContext)(N.a).user.uid,Object(s.useContext)(C.a));return l.firebase,l.FieldValue,Object(b.jsx)("img",{src:t.imageSrc,alt:t.caption})},S=c(65),F=c(66),D=c(67);var L=function(e){var t=e.content,c=Object(s.useRef)(null);return Object(b.jsxs)("div",{className:"rounded col-span-4 border bg-white border-gray-500 mb-8 mx-8 md:mx-4",children:[Object(b.jsx)(I,{username:t.username,profilePic:t.profilePicture?t.profilePicture:"/images/avatars/dali.jpg"}),Object(b.jsx)(P,{content:t}),Object(b.jsx)(S.a,{docId:t.docId,totalLikes:t.likes.length,likedPhoto:t.userLikedPhoto,handleFocus:function(){return c.current.focus()}}),Object(b.jsx)(F.a,{caption:t.caption,username:t.username}),Object(b.jsx)(D.a,{docId:t.docId,comments:t.comments,posted:t.dateCreated,commentInput:c})]})},z=c(20),M=(c(44),c(64));var U=function(){var e=y().photos,t=Object(a.a)().user;return Object(b.jsxs)("div",{className:"container col-span-3 md:col-span-2 ",children:[Object(b.jsxs)("div",{className:" flex items-center px-4 mx-4 mb-0 mt-28 md:mt-0",children:[Object(b.jsx)("div",{className:" flex flex-col h-0 w-2/5 border border-gray-500"}),Object(b.jsx)("div",{className:" flex flex-col items-center w-1/5 py-2",children:Object(b.jsx)("label",{for:"file-upload",children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-14 w-14",viewBox:"0 0 20 20",fill:"currentColor",children:Object(b.jsx)("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})})})}),Object(b.jsx)("div",{className:" flex flex-col h-0 w-2/5 border border-gray-500"})]}),Object(b.jsx)("p",{className:"text-center mx-6 sm:mx-4 lg:ml-0 mx-auto mb-4",children:"please upload a file less than 1MB, or else it will not upload"}),Object(b.jsx)(z.a,{position:"top-center",autoClose:4e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),Object(b.jsx)("input",{type:"file",id:"file-upload",hidden:!0,accept:".jpeg, .png, .jpg",onChange:function(e){Object(k.a)(e.target.files[0]).then((function(e){Object(m.k)(t,e)})).catch((function(e){}))}}),e?e.length>0?e.map((function(e){return Object(b.jsx)(L,{content:e},e.docId)})):Object(b.jsx)("p",{className:"text-center text-2xl",children:"Follow pages to see photos"}):Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(M.a,{})})]})};t.default=function(){return Object(s.useEffect)((function(){document.title="Insta"}),[]),Object(b.jsxs)("div",{className:"bg-gray-100 z-0",children:[Object(b.jsx)(n.a,{className:"z-20"}),Object(b.jsxs)("div",{className:"grid grid-cols-3 gap-4 justify-between mx-auto h-screen max-w-screen-lg mt-16 z-0",children:[Object(b.jsx)(U,{}),Object(b.jsx)(w,{})]})]})}}}]);
//# sourceMappingURL=4.900c62f2.chunk.js.map