(this["webpackJsonpinsta-clone"]=this["webpackJsonpinsta-clone"]||[]).push([[1],{12:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"f",(function(){return c})),r.d(t,"e",(function(){return s})),r.d(t,"b",(function(){return u})),r.d(t,"d",(function(){return o}));var n="/",a="/login",c="/signup",s="/profile/:username",u="/profile/edit/:username",o="/not-found"},22:function(e,t,r){"use strict";var n=r(2),a=Object(n.createContext)(null);t.a=a},23:function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return b})),r.d(t,"e",(function(){return p})),r.d(t,"f",(function(){return h})),r.d(t,"g",(function(){return x})),r.d(t,"d",(function(){return g})),r.d(t,"h",(function(){return y})),r.d(t,"k",(function(){return N})),r.d(t,"j",(function(){return I})),r.d(t,"m",(function(){return P})),r.d(t,"l",(function(){return E})),r.d(t,"c",(function(){return L})),r.d(t,"i",(function(){return D}));var n=r(14),a=r(8),c=r(5),s=r.n(c),u=r(9),o=r(6),i=r(59);function l(e){return d.apply(this,arguments)}function d(){return(d=Object(u.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.firestore().collection("users").where("username","==",t).get();case 2:return r=e.sent,e.abrupt("return",r.docs.length>0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return f.apply(this,arguments)}function f(){return(f=Object(u.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.firestore().collection("users").where("email","==",t).get();case 2:return r=e.sent,console.log(" in email check"),e.abrupt("return",r.docs.length>0);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return j.apply(this,arguments)}function j(){return(j=Object(u.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.firestore().collection("users").where("userId","==",t).get();case 2:return r=e.sent,e.abrupt("return",r.docs.map((function(e){return Object(a.a)(Object(a.a)({},e.data()),{},{docId:e.id})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=Object(u.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.firestore().collection("users").where("username","==",t).get();case 2:return r=e.sent,e.abrupt("return",r.docs.map((function(e){return Object(a.a)(Object(a.a)({},e.data()),{},{docId:e.id})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return O.apply(this,arguments)}function O(){return(O=Object(u.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.firestore().collection("photos").where("userId","==",t).get();case 2:if(!((r=e.sent).docs.length>0)){e.next=5;break}return e.abrupt("return",r.docs.map((function(e){return Object(a.a)(Object(a.a)({},e.data()),{},{docId:e.id})})));case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(s.a.mark((function e(t,r){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.firestore().collection("users").limit(10).get();case 2:return n=e.sent,e.abrupt("return",n.docs.map((function(e){return Object(a.a)(Object(a.a)({},e.data()),{},{docId:e.id})})).filter((function(e){return e.userId!==t&&!r.includes(e.userId)})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(s.a.mark((function e(t,r){var c,u,i,l,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.firestore().collection("users").where("username","==",t).where("following","array-contains",r).get();case 2:return c=e.sent,u=c.docs.map((function(e){return Object(a.a)(Object(a.a)({},e.data()),{},{docId:e.id})})),i=Object(n.a)(u,1),l=i[0],d=void 0===l?{}:l,e.abrupt("return",0!==Object.keys(d).length);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t,r){return k.apply(this,arguments)}function k(){return(k=Object(u.a)(s.a.mark((function e(t,r,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.firestore().collection("users").doc(t).update({following:n?o.a.arrayRemove(r):o.a.arrayUnion(r)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,r){return S.apply(this,arguments)}function S(){return(S=Object(u.a)(s.a.mark((function e(t,r,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.firestore().collection("users").doc(t).update({followers:n?o.a.arrayRemove(r):o.a.arrayUnion(r)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return C.apply(this,arguments)}function C(){return(C=Object(u.a)(s.a.mark((function e(t,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.firestore().collection("users").doc(t).update({profilePicture:r}).then((function(){console.log("updated successfully")})).catch((function(e){console.log("error occurred",e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return F.apply(this,arguments)}function F(){return(F=Object(u.a)(s.a.mark((function e(t,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.firestore().collection("users").doc(t).update({fullName:r.fullName,username:r.username,bio:r.bio,email:r.email,mobile:r.mobile,gender:r.gender}).then((function(){console.log("updated successfully")})).catch((function(e){console.log("error occurred",e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t){return U.apply(this,arguments)}function U(){return(U=Object(u.a)(s.a.mark((function e(t,r){var n,c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.firestore().collection("photos").where("userId","in",r).get();case 2:return n=e.sent,c=n.docs.map((function(e){return Object(a.a)(Object(a.a)({},e.data()),{},{docId:e.id})})),e.next=6,Promise.all(c.map(function(){var e=Object(u.a)(s.a.mark((function e(r){var n,c,u,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,r.likes.includes(t)&&(n=!0),e.next=4,p(r.userId);case 4:return c=e.sent,u=c[0],o=u.username,i=u.profilePicture,e.abrupt("return",Object(a.a)(Object(a.a)({username:o,profilePicture:i},r),{},{userLikedPhoto:n}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return A.apply(this,arguments)}function A(){return(A=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.firestore().collection("photos").doc(t).get();case 2:if(!e.sent.exists){e.next=5;break}return e.abrupt("return",!1);case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t){return M.apply(this,arguments)}function M(){return(M=Object(u.a)(s.a.mark((function e(t,r){var n,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n="";case 1:if(!z(n=Object(i.a)())){e.next=5;break}return e.abrupt("break",7);case 5:e.next=1;break;case 7:return e.next=9,o.b.firestore().collection("photos").doc(n);case 9:a=e.sent,c={caption:"new Image Added",comments:[],dateCreated:Date.now(),imageSrc:r,likes:[],userId:t.userId,userLatitude:"",userLongitude:""},a.set(c).then((function(){console.log("Post uploaded successfully!")})).catch((function(e){console.error("Error uploading: ",e)}));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},24:function(e,t,r){"use strict";var n=r(2),a=Object(n.createContext)(null);t.a=a},26:function(e,t,r){"use strict";var n=r(5),a=r.n(n),c=r(9),s=r(14),u=r(2),o=r(24),i=r(23);t.a=function(){var e=Object(u.useState)({}),t=Object(s.a)(e,2),r=t[0],n=t[1],l=Object(u.useContext)(o.a).user;return Object(u.useEffect)((function(){function e(){return(e=Object(c.a)(a.a.mark((function e(){var t,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.e)(l.uid);case 2:t=e.sent,r=Object(s.a)(t,1),c=r[0],n(c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(null===l||void 0===l?void 0:l.uid)&&function(){e.apply(this,arguments)}()}),[l]),console.log("activeUser",r),{user:r}}},29:function(e,t,r){"use strict";var n=r(2),a=r(22),c=(r(24),r(12)),s=r(19),u=r(26),o=r(1);t.a=function(){var e=Object(n.useContext)(a.a).firebase,t=Object(u.a)().user;return Object(n.useEffect)((function(){}),[t]),Object(o.jsx)("div",{className:"py-2",children:Object(o.jsx)("header",{className:"h-16 bg-white border-b border-gray-500 mb-8 fixed top-0 w-full",children:Object(o.jsx)("div",{className:"container mx-auto max-w-screen-lg h-full ",children:Object(o.jsxs)("div",{className:"flex justify-between h-full",children:[Object(o.jsx)("div",{className:"text-gray-700 text-center flex items-center alignItems cursor-pointer",children:Object(o.jsx)("h1",{className:"flex justify-center w-full",children:Object(o.jsx)(s.b,{to:c.a,"aria-label":"Instagram-logo",children:Object(o.jsx)("img",{src:"/images/logo.png",alt:"Instagram-logo",className:"mt-2 w-6/12"})})})}),Object(o.jsx)("div",{className:"text-gray-700 text-center gap-4 flex items-center align-items",children:t?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(s.b,{to:c.a,"aria-label":"Dashboard",children:Object(o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),Object(o.jsx)(s.b,{to:c.c,children:Object(o.jsx)("button",{type:"button",title:"Sign Out",onClick:function(){e.auth().signOut()},onKeyDown:function(t){"Enter"===t.key&&console.log(e.auth().signOut())},children:Object(o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(o.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})}),Object(o.jsx)(s.b,{to:"/profile/".concat(t.username),children:Object(o.jsx)("div",{className:"flex items-center cursor-pointer",children:Object(o.jsx)("img",{className:"rounded-full h-8 w-8",alt:"".concat(t.displayName," profile "),src:t.profilePicture?t.profilePicture:"/images/avatars/dali.jpg"})})})]}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(s.b,{to:c.c,children:Object(o.jsx)("button",{type:"button",className:"m-2 bg-blue-500 text-white font-bold text-sm rounded w-20 h-8",children:"Login"})}),Object(o.jsx)(s.b,{to:c.f,children:Object(o.jsx)("button",{type:"button",className:"m-2 bg-white text-blue-500 border border-blue-500 font-bold text-sm rounded w-20 h-8 ",children:"SignUp"})})]})})]})})})})}},40:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(5),a=r.n(n),c=r(9);function s(e){return u.apply(this,arguments)}function u(){return(u=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r=new FileReader;r.readAsDataURL(t),r.onload=function(){e(r.result)}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},56:function(e,t,r){},57:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r(41),c=r.n(a),s=r(19),u=r(7),o=r(29),i=r(12),l=r(24),d=r(8),b=r(28),f=r(1);var p=function(e){var t=e.user,r=e.loggedInPath,n=e.children,a=Object(b.a)(e,["user","loggedInPath","children"]);return Object(f.jsx)(u.b,Object(d.a)(Object(d.a)({},a),{},{render:function(e){var a=e.location;return t?t?Object(f.jsx)(u.a,{to:{pathname:r,state:{from:a}}}):null:n}}))};var j=function(e){var t=e.user,r=e.children,n=Object(b.a)(e,["user","children"]);return Object(f.jsx)(u.b,Object(d.a)(Object(d.a)({},n),{},{render:function(e){var n=e.location;return t?r:t?null:Object(f.jsx)(u.a,{to:{pathname:i.c,state:{from:n}}})}}))},h=r(14),m=r(22);var x=function(){var e=Object(n.useState)(JSON.parse(localStorage.getItem("authUser"))),t=Object(h.a)(e,2),r=t[0],a=t[1],c=Object(n.useContext)(m.a).firebase;return Object(n.useEffect)((function(){var e=c.auth().onAuthStateChanged((function(e){e?(localStorage.setItem("authUser",JSON.stringify(e)),a(e)):(localStorage.removeItem("authUser"),a(null))}));return function(){return e()}}),[c]),{user:r}},O=r(26),g=r(40),v=r(23);var y=function(){var e=Object(O.a)().user;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(o.a,{}),Object(f.jsxs)("div",{className:"container max-w-screen-lg mt-16 mx-auto bg-gray-100 items-center justify-center",children:[Object(f.jsx)(w,{user:e}),Object(f.jsx)(N,{user:e})]})]})},w=function(e){var t=e.user;return Object(f.jsxs)("div",{className:"flex items-center justify-center py-5 m-10 ",children:[Object(f.jsx)("div",{className:"flex items-center justify-between mr-10 rounded-full w-16 h-16 ",children:Object(f.jsx)("img",{src:t.profilePicture?t.profilePicture:"/images/avatars/dali.jpg",alt:"profile pic",id:"dp",className:"rounded-full object-cover w-full h-full"})}),Object(f.jsxs)("div",{className:"col-span-3",children:[Object(f.jsxs)("p",{className:"font-bold text-md text-gray-700",children:[t.username," "]}),Object(f.jsx)("label",{for:"edit-profile-pic",children:Object(f.jsx)("p",{className:"text-md font-bold text-blue-600",children:"Edit Profile Picture"})})]}),Object(f.jsx)("input",{id:"edit-profile-pic",type:"file",className:"hidden",onChange:function(e){Object(g.a)(e.target.files[0]).then((function(e){Object(v.m)(t.docId,e),document.getElementById("dp").src=e})).catch((function(e){console.log(e)}))}})]})},N=function(e){var t=e.user,r=Object(n.useState)(t.fullName),a=Object(h.a)(r,2),c=a[0],s=a[1],u=Object(n.useState)(t.username),o=Object(h.a)(u,2),i=o[0],l=o[1],d=Object(n.useState)(t.bio),b=Object(h.a)(d,2),p=b[0],j=b[1],m=Object(n.useState)(t.email),x=Object(h.a)(m,2),O=x[0],g=x[1],y=Object(n.useState)(t.mobile),w=Object(h.a)(y,2),N=w[0],k=w[1],I=Object(n.useState)(t.gender),S=Object(h.a)(I,2),P=S[0],C=S[1];Object(n.useEffect)((function(){document.title="Edit Profile-Insta",s(t.fullName),l(t.username),j(t.bio),g(t.email),k(t.mobile),C(t.gender)}),[t]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"grid grid-cols-4 items-center px-auto content-center mx-auto px-auto w-1/2 my-10",children:[Object(f.jsx)("label",{for:"userFullname",children:Object(f.jsx)("p",{className:"font-bold text-gray-700 ",children:"Name"})}),Object(f.jsx)("input",{type:"text",id:"userFullname",onChange:function(e){return s(e.target.value)},value:c,className:" text-md col-span-3 rounded text-start border border-gray-500 bg-gray-200 w-full   py-5 px-4 h-1.5 "})]}),Object(f.jsxs)("div",{className:"grid grid-cols-4  items-center px-auto content-center mx-auto px-auto w-1/2 my-10",children:[Object(f.jsx)("label",{for:"username",children:Object(f.jsx)("p",{className:"font-bold text-gray-700 ",children:"Username"})}),Object(f.jsx)("input",{type:"text",id:"username",onChange:function(e){return l(e.target.value)},value:i,className:" text-md col-span-3 rounded text-start border border-gray-500 bg-gray-200 w-full  py-5 px-4 h-1.5 "})]}),Object(f.jsxs)("div",{className:"grid grid-cols-4  items-center px-auto content-center mx-auto px-auto w-1/2 my-10",children:[Object(f.jsx)("label",{for:"bio",children:Object(f.jsx)("p",{className:"font-bold text-gray-700 ",children:"Bio"})}),Object(f.jsx)("textarea",{rows:3,id:"bio",onChange:function(e){return j(e.target.value)},value:p,className:" text-md col-span-3 rounded text-start border border-gray-500 bg-gray-200 w-full  py-3 px-4 h-3.0 "})]}),Object(f.jsxs)("div",{className:"grid grid-cols-4  items-center px-auto content-center mx-auto px-auto w-1/2 my-10",children:[Object(f.jsx)("label",{for:"email",children:Object(f.jsx)("p",{className:"font-bold text-gray-700 ",children:"Email"})}),Object(f.jsx)("input",{type:"email",id:"email",onChange:function(e){return g(e.target.value)},value:O,className:" text-md col-span-3 rounded text-start border border-gray-500 bg-gray-200 w-full  py-5 px-4 h-1.5 "})]}),Object(f.jsxs)("div",{className:"grid grid-cols-4  items-center px-auto content-center mx-auto px-auto w-1/2 my-10",children:[Object(f.jsx)("label",{for:"mobile",children:Object(f.jsx)("p",{className:"font-bold text-gray-700 ",children:"Mobile"})}),Object(f.jsx)("input",{type:"text",id:"mobile",maxLength:10,onChange:function(e){return k(e.target.value)},value:N,className:"phone validate text-md col-span-3 rounded text-start border border-gray-500 bg-gray-200 w-full  py-5 px-4 h-1.5 "})]}),Object(f.jsxs)("div",{className:"grid grid-cols-4  items-center px-auto content-center mx-auto px-auto w-1/2 my-10",children:[Object(f.jsx)("label",{for:"gender",children:Object(f.jsx)("p",{className:"font-bold text-gray-700 ",children:"Gender"})}),Object(f.jsxs)("select",{id:"gender",value:P,onChange:function(e){return C(e.target.value)},placeholder:"Select..",className:" text-md col-span-3 rounded text-start border border-gray-500 bg-gray-200 w-full  py-2 px-4  ",children:[Object(f.jsx)("option",{disabled:!0,selected:!0,value:"",children:"Select.."}),Object(f.jsx)("option",{value:"male",children:"Male"}),Object(f.jsx)("option",{value:"female",children:"Female"})]})]}),Object(f.jsx)("div",{className:"flex justify-center px-auto",children:Object(f.jsx)("button",{type:"button",onClick:function(e){e.preventDefault();var r={fullName:c,username:i,bio:p,email:O,mobile:N,gender:P};Object(v.l)(t.docId,r)},className:"bg-blue-500 px-3 py-1 text-white rounded",children:"Submit"})})]})},k=(r(56),Object(n.lazy)((function(){return r.e(6).then(r.bind(null,69))}))),I=Object(n.lazy)((function(){return r.e(9).then(r.bind(null,70))})),S=Object(n.lazy)((function(){return Promise.all([r.e(0),r.e(8)]).then(r.bind(null,74))})),P=Object(n.lazy)((function(){return Promise.all([r.e(0),r.e(4),r.e(5)]).then(r.bind(null,73))})),C=Object(n.lazy)((function(){return r.e(7).then(r.bind(null,71))}));var E=function(){var e=x().user;return Object(f.jsx)(l.a.Provider,{value:{user:e},children:Object(f.jsx)(s.a,{children:Object(f.jsx)(n.Suspense,{fallback:Object(f.jsx)("p",{className:"justify-center text-center",children:"Loading ... "}),children:Object(f.jsxs)(u.d,{children:[Object(f.jsx)(p,{user:e,loggedInPath:i.a,path:i.c,children:Object(f.jsx)(k,{})}),Object(f.jsx)(p,{user:e,loggedInPath:i.a,path:i.f,children:Object(f.jsx)(I,{})}),Object(f.jsx)(u.b,{path:i.e,component:S,exact:!0}),Object(f.jsx)(j,{user:e,path:i.a,exact:!0,children:Object(f.jsx)(P,{})}),Object(f.jsx)(j,{user:e,path:i.b,exact:!0,children:Object(f.jsx)(y,{})}),Object(f.jsx)(u.b,{component:C})]})})})})},F=r(6);c.a.render(Object(f.jsx)(m.a.Provider,{value:{firebase:F.b,FieldValue:F.a},children:Object(f.jsx)(E,{})}),document.getElementById("root"))},6:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return c}));var n=r(33),a=(r(58),r(49),n.a.initializeApp({apiKey:"AIzaSyDIES6lKwkUkjAZuMEhiuAlaRa9kC9jPKE",authDomain:"insta-clone-c2d1c.firebaseapp.com",projectId:"insta-clone-c2d1c",storageBucket:"insta-clone-c2d1c.appspot.com",messagingSenderId:"231328841992",appId:"1:231328841992:web:f8e74bad7569702891acbd",measurementId:"G-1VNYZLXMZW"})),c=n.a.firestore.FieldValue}},[[57,2,3]]]);
//# sourceMappingURL=main.de211a74.chunk.js.map